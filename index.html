<!DOCTYPE html>
<html>
<head>
    <title>Device Scanner</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Device Scanner</h1>

        <div id="serial-ports" class="mb-3">
            <h2>Serial Ports</h2>
            <select id="port-selector" class="form-control"></select>
            <textarea id="command-input" class="form-control mt-2" placeholder="Enter command"></textarea>
            <button id="send-command-button" class="btn btn-primary mt-2">Send Command</button>
            <div id="command-response" class="mt-2"></div>
        </div>

        <div id="network-interfaces" class="mb-3">
            <h2>Network Interfaces</h2>
            <select id="interface-selector" class="form-control"></select>
            <button id="wifi-scan-button" class="btn btn-primary mt-2">Start WiFi Scan</button>
            <div id="wifi-scan-results" class="mt-2"></div>
        </div>
    </div>

    <script>
    $(document).ready(function() {
        $.get('/', function(data) {
            data.serial_ports.forEach(function(port) {
                $('#port-selector').append(new Option(port, port));
            });
            data.network_interfaces.forEach(function(interface) {
                $('#interface-selector').append(new Option(interface, interface));
            });
        });

        $('#send-command-button').click(function() {
            $.post('/send_command', {port: $('#port-selector').val(), command: $('#command-input').val()}, function(data) {
                $('#command-response').text(data.response);
            });
        });

        $('#wifi-scan-button').click(function() {
            $.post('/wifi_scan', {interface: $('#interface-selector').val()}, function(data) {
                $('#wifi-scan-results').empty();
                data.devices.forEach(function(device) {
                    $('#wifi-scan-results').append(`<p>${device.mac} - ${device.ssid} - ${device.essid} - ${device.device_type}</p>`);
                });
            });
        });
    });
    </script>
</body>
</html>
